{#=====================================================
  Home page
  - Hero style greeting banner
  - List of things passed in as 'things' array
  - Form for adding a new thing
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Totally Timber - Form Home

{% endblock %}


{% block content %}
    <h2> Timber </h2>
    <h1>Consent Document Form</h1>
    <p>Timber Specifications</p>
    <div>
        <form action="/pageSubmit/timber" method="post">
            <h4>choose timber species</h4>
            <select id="timberDropdown" name="species" required>
                <option value="macrocarpa">macrocarpa</option>
                <option value="walnut">walnut</option>
                <option value="redwood">redwood</option>
                <option value="pine">pine</option>
            </select>
            <h4>Choose timber profile</h4>
            <select id="profileDropdown" name="profile" required>
                {% for profile in profiles %}
                    <option value="{{ profile.profile }}">{{ profile.profile }}</option>
                {% endfor %}
            </select>
            <div id="sideby">
                <img src="" alt="{{ profile }}" id="pImg">

                <script>
                    const profileDropdown = document.getElementById('profileDropdown');
                    const timberDropdown = document.getElementById('timberDropdown');
                    const img = document.getElementById('pImg');

                    function setImg(dropdown) {
                        const selectedValue = dropdown.value
                        img.src = "/profile_image/" + selectedValue
                        img.alt = selectedValue
                        });
                    }

                    if ("{{ species }}" != "None") {
                        timberDropdown.value = "{{ species }}";
                    }
                    if ("{{ profile }}" != "None") {
                        profileDropdown.value = "{{ profile }}";
                    }
                    
                    setImg(profileDropdown)
                    profileDropdown.addEventListener('change', () => {
                       setImg(profileDropdown)
                    });
                </script>


                <button id="submit" type="submit">submit</button>
            </div>   
        </form>
    </div>




{% endblock %}

