{#=====================================================
  Home page
  - Hero style greeting banner
  - List of things passed in as 'things' array
  - Form for adding a new thing
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Totally Timber - Form Home

{% endblock %}


{% block content %}
    <h2> Timber </h2>
    <h1>Consent Document Form</h1>
    <p>Timber Specifications</p>
    <div>
        <form action="/pageSubmit/" method="post">
            <h4>choose timber species</h4>
            <select name="species">
                <option value="macrocarpa">macrocarpa</option>
                <option value="walnut">walnut</option>
                <option value="redwood">redwood</option>
                <option value="pine">pine</option>
            </select>
            <h4>Choose timber profile</h4>
            <select id="speciesDropdown" name="profile">
                {% for profile in profiles %}
                    <option value="{{ profile.profile }}">{{ profile.profile }}</option>
                {% endfor %}
            </select>
            <div id="sideby">
                <img src="/app/static/images/profile.png" alt="{{ profile }}" id="pImg">

                <script>
                    const dropdown = document.getElementById('speciesDropdown');
                    const img = document.getElementById('pImg');

                    dropdown.addEventListener('change', () => {
                        const selectedValue = dropdown.value; 
                        const profileId = "/profile_image/" + selectedValue
                        fetch(profileId)
                        .then(res => res.json())
                        .then(data => {
                        img.src = data.image;
                        img.alt = selectedValue
                        });
                        
                    });
                </script>


                <button id="submit" type="submit">submit</button>
            </div>   
        </form>
    </div>




{% endblock %}

